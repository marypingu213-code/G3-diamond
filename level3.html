<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¬¬ä¸‰é—œï¼šèªè©æˆ‘æœ€è¡Œ</title>
    <script src="data.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff;
            /* é¿å…å¹³æ¿ä¸‹æ‹‰æ›´æ–° */
            overscroll-behavior-y: none; 
        }

        .word-card {
            cursor: grab;
            transition: all 0.2s;
            user-select: none;
            /* ğŸŒŸ é—œéµï¼šé˜²æ­¢å¹³æ¿æ‹–æ›³æ™‚ç¶²é è·Ÿè‘—æ»‘å‹• */
            touch-action: none; 
        }

        .word-card:active {
            cursor: grabbing;
            transform: scale(1.05);
        }

        .drop-zone {
            display: inline-flex;
            min-width: 120px;
            height: 36px;
            border-bottom: 3px dashed #3b82f6;
            margin: 0 8px;
            vertical-align: middle;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
            cursor: pointer;
        }

        .drop-zone.hover {
            background-color: #dbeafe;
            border-radius: 8px;
            border-bottom-style: solid;
        }

        .correct {
            color: #059669;
            border-bottom-color: #059669;
            border-bottom-style: solid;
            font-weight: bold;
        }

        .wrong {
            color: #dc2626;
            border-bottom-color: #dc2626;
            border-bottom-style: solid;
            font-weight: bold;
            animation: shake 0.4s;
        }

        /* ç­”éŒ¯æ–æ™ƒå‹•ç•« */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }

        /* æ¨™é¡ŒæŒ‰éˆ•å€ */
        .header-btns a {
            transition: transform 0.1s;
        }
        .header-btns a:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-3xl shadow-xl overflow-hidden border-4 border-yellow-300 relative">
        
        <div class="bg-yellow-400 p-6 text-center relative">
            <div class="header-btns absolute top-4 left-4 flex flex-col md:flex-row gap-2">
                <a href="index.html" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-full shadow hover:bg-blue-700 text-sm md:text-base border-2 border-blue-800">ğŸ  å›ç¸½å¤§å»³</a>
                <a href="#" id="back-btn" class="bg-white text-blue-800 font-bold py-2 px-4 rounded-full shadow hover:bg-gray-100 text-sm md:text-base border-2 border-gray-200">ğŸ”™ å›é¸å–®</a>
            </div>

            <h1 id="lesson-title" class="text-3xl md:text-4xl font-bold text-white drop-shadow-md mt-12 md:mt-0">ğŸ“ èªè©å¡«ç©ºæ¸¬é©—</h1>
            <p class="text-yellow-900 mt-2 font-medium text-lg">è«‹å°‡æ­£ç¢ºçš„èªè©æ‹–å‹•åˆ°æ ¼å­è£¡ï¼</p>
        </div>

        <div class="p-6 bg-yellow-50 border-b-2 border-yellow-100">
            <div class="text-sm font-bold text-yellow-700 mb-3 flex items-center">
                <span class="bg-yellow-200 px-3 py-1 rounded-full text-xs mr-2">èªè©éŠ€è¡Œ</span>
                å¯ä»¥ç”¨æ‰‹æŒ‡é•·æŒ‰èªè©ï¼Œæ‹–å‹•åˆ°ä¸‹æ–¹çš„åº•ç·šä¸­å–”ï¼
            </div>
            <div id="word-bank" class="flex flex-wrap gap-3 justify-center">
                </div>
        </div>

        <div class="p-6 md:p-10">
            <div id="quiz-list" class="space-y-8">
                </div>

            <div class="mt-12 flex flex-col md:flex-row gap-4 justify-center items-center">
                <button onclick="checkAnswers()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-10 rounded-full shadow-lg transform transition active:scale-95 text-xl flex items-center gap-2">
                    âœ… å®ŒæˆæŒ‘æˆ°ï¼
                </button>
                <button onclick="resetQuiz()" class="text-blue-500 hover:text-blue-700 font-bold py-2 px-6 rounded-full border-2 border-blue-500 transition active:bg-blue-50">
                    ğŸ”„ é‡æ–°é–‹å§‹
                </button>
            </div>

            <div id="result-message" class="hidden mt-8 p-6 rounded-2xl text-center transform transition-all duration-500">
                <h2 id="score-text" class="text-2xl font-bold mb-2"></h2>
                <p id="feedback-text" class="text-lg"></p>
            </div>
        </div>
    </div>

    <script>
        // ğŸŒŸ æŠ“å–ç¶²å€ä¸Šçš„èª²ç¨‹ ID (é è¨­ç‚º 2)
        const urlParams = new URLSearchParams(window.location.search);
        const lessonId = urlParams.get('id') || "2"; 
        
        // è¨­å®šå›é¸å–®æŒ‰éˆ•çš„é€£çµ
        document.getElementById('back-btn').href = `lesson.html?id=${lessonId}`;

        // ğŸŒŸ å¾ data.js è®€å–å°æ‡‰èª²æ¬¡çš„è³‡æ–™
        const lessonData = allLessonsData[lessonId];
        let questions = lessonData ? lessonData.level3 : [];
        let words = [];

        // å¹³æ¿å°ˆç”¨ï¼šè§¸æ§æ‹–æ›³è®Šæ•¸
        let draggedWord = "";
        let ghostEl = null;

        function shuffle(array) {
            return [...array].sort(() => Math.random() - 0.5);
        }

        function initQuiz() {
            if (!questions || questions.length === 0) {
                document.getElementById('quiz-list').innerHTML = "<p class='text-center text-gray-500 text-xl font-bold'>æœ¬èª²ç›®å‰æ²’æœ‰ç¬¬ä¸‰é—œçš„é¡Œç›®å–”ï¼</p>";
                document.querySelector('.mt-12').style.display
